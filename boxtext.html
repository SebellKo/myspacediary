<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>boxtext</title>
    <link rel="stylesheet" href="boxtext.css">
</head>
<body>
    <div id="wrap">
        <div id="box_container" class="box_container">
            <div id="top">top</div>
            <div id="bottom">bottom</div>
            <div id="left">left</div>
            <div id="right">right</div>
            <div id="back">back</div>
        </div>
        <div id="box_container2" class="box_container">
            <div id="top">top</div>
            <div id="bottom">bottom</div>
            <div id="left">left</div>
            <div id="right">right</div>
            <div id="back">back</div>
        </div>
        <div id="box_container3" class="box_container">
            <div id="top">top</div>
            <div id="bottom">bottom</div>
            <div id="left">left</div>
            <div id="right">right</div>
            <div id="back">back</div>
        </div>
        <div id="box_container4" class="box_container">
            <div id="top">top</div>
            <div id="bottom">bottom</div>
            <div id="left">left</div>
            <div id="right">right</div>
            <div id="back">back</div>
        </div>
    </div>
    <div class="info bottom">
        <ul>
            <li>pageX : <span class="pageX">0</span></li>
            <li>pageY : <span class="pageY">0</span></li>
            <li>mouseX : <span class="mouseX">0</span></li>
            <li>mouseY : <span class="mouseY">0</span></li>
            <li>angleX : <span class="angleX">0</span></li>
            <li>angleY : <span class="angleY">0</span></li>
            <li>fmouseX : <span class="fmouseX">0</span></li>
            <li>fmouseY : <span class="fmouseY">0</span></li>
        </ul>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.1/gsap.min.js"></script>
    <script>
        let x = 0,
            y = 0,
            mouseX = 0,
            mouseY = 0,
            angleX = 0,
            angleY = 0,
            fmouseX = 0,
            fmouseY = 0,
            xPos = 0,
            yPos = 0;
        
            let target = document.querySelector("#box_container3");
           
            target.addEventListener("mousemove", function(e)
            {
                const rect = this.getBoundingClientRect();
                console.log(rect);
                x = (e.pageX - ((rect.width/2) + rect.left)) / 10;
                y = (e.pageY - ((rect.height/2) + rect.top + 100)) / 5;

        
                //움직임
                let move = document.querySelector("#box_container3");
                // move.style.transformOrigin = "center center";
                move.style.transition = "all 0s"
                move.style.transform = "perspective(400px) rotateX("+ -y +"deg) rotateY("+ x +"deg)";
                // gsap.to(move, {duration: 1, rotateX: y, roateY: x});
                target.addEventListener("mouseleave", function()
                {
                    x = 0;
                    y = 0;
                    this.style.transition = "all 2s"
                    this.style.transform = "perspective(400px) rotateX("+ y +"deg) rotateY("+ x +"deg)";
                });
            });

            

        document.addEventListener("mousemove", () =>
            {
                document.querySelector(".pageX").textContent = x;
                document.querySelector(".pageY").textContent = y;
                document.querySelector(".mouseX").textContent = mouseX;
                document.querySelector(".mouseY").textContent = mouseY;
                document.querySelector(".angleX").textContent = angleX;
                document.querySelector(".angleY").textContent = angleY;
                document.querySelector(".fmouseX").textContent = fmouseX;
                document.querySelector(".fmouseY").textContent = fmouseY;
            });
    </script>
</body>
</html>